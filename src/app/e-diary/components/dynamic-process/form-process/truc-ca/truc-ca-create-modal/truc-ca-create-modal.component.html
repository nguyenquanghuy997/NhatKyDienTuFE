<div
  [class]="'modal' + (isVisible ? ' fade show' : '')"
  id="TrucCaAddnewModal"
  [style]="isVisible ? 'block' : 'none'"
  #TrucCaAddnewModal
>
  <div class="modal-dialog modal-lg">
    <!-- Create -->
    <div class="modal-content" *ngIf="functionCode == FunctionCode.CREATE">
      <div class="modal-header justify-content-between align-items-center">
        <h5 class="modal-title">Thêm mới bản ghi</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          (click)="onHide()"
        >
          <i class="anticon anticon-close"></i>
        </button>
      </div>
      <div class="modal-body scrollable">
        <form [formGroup]="popupForm" (ngSubmit)="onSubmit()">
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="StartDTG"
                >Ngày <span class="text-danger">*</span></label
              >

              <input
                id="StartDTG"
                formControlName="StartDTG"
                class="form-select form-control"
                [ngClass]="{ 'is-invalid': submitted && f.StartDTG.errors }"
                placeholder="Chọn ngày"
                name="dp"
                [(ngModel)]="model.StartDTG"
                bsDatepicker
                #d="bsDatepicker"
                [bsConfig]="bsConfig"
                [(bsValue)]="selectedDateValue"
              />

              <div
                *ngIf="submitted && f.StartDTG.errors"
                class="invalid-feedback"
              >
                <div *ngIf="f.StartDTG.errors.required">Không được trống</div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <label for="ShiftId"
                >Ca trực <span class="text-danger">*</span></label
              >
              <ng-select
                [searchable]="true"
                dropdownPosition="bottom"
                formControlName="ShiftId"
                [(ngModel)]="model.ShiftId"
                id="ShiftId"
                placeholder="Chọn ca trực"
                notFoundText="{{ ngSelectMessage.NotFound }}"
                [appendTo]="'body'"
                [ngClass]="{
                  'is-invalid':
                    f.ShiftId.errors && (f.ShiftId.touched || f.ShiftId.dirty)
                }"
              >
                <ng-option *ngFor="let item of lstShift" [value]="item.Id">
                  {{ item.Name }}
                </ng-option>
              </ng-select>
              <div
                *ngIf="
                  f.ShiftId.errors && (f.ShiftId.touched || f.ShiftId.dirty)
                "
                class="error-feedback"
              >
                <div *ngIf="f.ShiftId.errors.required">
                  Ca trực không được trống
                </div>
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-12">
              <label for="txtNote" class="form-label">Ghi chú</label>
              <textarea
                rows="3"
                formControlName="Note"
                class="form-control"
                id="txtNote"
                placeholder="Ghi chú"
                [(ngModel)]="model.Note"
                maxlength="1000"
                [ngClass]="{ 'is-invalid': submitted && f.Note.errors }"
              ></textarea>
              <div *ngIf="submitted && f.Note.errors" class="invalid-feedback">
                <div *ngIf="f.Note.errors?.[maxlength]">Tối đa 1000 ký tự</div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button
          type="submit"
          *ngIf="lstFunctionCode && lstFunctionCode.includes(functionCode)"
          class="btn btn-primary"
          (click)="onSubmit()"
        >
          Lưu
        </button>
        <button (click)="onHide()" class="btn btn-secondary">Đóng</button>
      </div>
    </div>
    <!--// -->
  </div>
</div>
